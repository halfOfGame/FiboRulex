<template>

	<div>
		<cont title="数据源指标" :getData="getDataFun"></cont>

	</div>


</template>

<script>
	import cont from '@/components/common/cont.vue'
	import {
		getfieldList,addfieldList,getfieldListTree,updatafieldList,getfieldsave,getfieldInfo,updatafield,fieldusing,fielddownTemplate,fieldupdata
	} from '@/api/index.js'

	export default {
		name:'SQLManage',
		components: {
			cont
		},
	
		data() {
			return {
				getDataFun: {
					type:2,
					row: [  {
						label: '序号',
						row: 'id',
						width:'100px'
					}, {
						label: '字段名称',
						row: 'fieldEn',
						width:'230px'
					}, {
						label: '字段中文名',
						row: 'fieldCn',
						width:'230px'
					}, {
						label: '数据源类型',
						row: 'dataSourceId',
						fn:(res)=>{
							let obj = this.$store.state.Sourcelist.find(x=>x.id==res)
							return obj&&obj.type
						},
						
					}, {
						label: '字段类型',
						row: 'valueType',
						type:'type'
					}, {
						label: '状态',
						row: 'status',
						type:'State'
					}, {
						label: '创建人',
						row: 'nickName'
					},{
						label: '创建时间',
						row: 'created',
						type:'Time'
					},],
					redact:"dataManageRedact",
					async getTree(e){
						return await getfieldListTree(e).then(res => {
							return res
						})
					},
					async getlist(e) {
						e.fType = 2
						return await getfieldList(e).then(res => {
							return res
						})
					},
					async addlist(e) {
						
						return await addfieldList(e).then(res => {
							return res
						})
					},
					async updatalist(e) {
					
						return await updatafieldList(e).then(res => {
							return res
						})
					},
					async setsave(e) {
				
						return await getfieldsave(e).then(res => {
							return res
						})
					},
					async getInfo(e){
				
						return await getfieldInfo(e).then(res=>{
							return res
						})
					},
					async updatafield(e){
					
						return await updatafield(e).then(res=>{
							return res
						})
					},
					async fieldusing(e){
				
						return await fieldusing(e).then(res=>{
							return res
						})
					},
					async down(e){
					
						return await fielddownTemplate(e).then(res=>{
							return res
						})
					},
					async fieldsubmit(e){
		
						return await fieldupdata(e).then(res=>{
							return res
						})
					}
				},
			};
		}
	
	};
</script>

<style>

</style>
